#!/bin/bash
# Programmable completion:
# Bash supports programmable completion, i.e. different behaviour on hitting TAB
# depending on the command.

# Load system and Homebrew bash completion if available; this might be
# unnecessarily loading system bash completion a second time, which is
# inefficient but not a problem.
if [ -f /etc/bash_completion ]; then
  # shellcheck disable=SC1091
  source /etc/bash_completion
fi
if [ -f "/usr/local/etc/bash_completion" ]; then
  # shellcheck disable=SC1091
  . "/usr/local/etc/bash_completion"
fi

# Make tab completion only show directories when completing cd and rmdir
complete -A directory -o bashdefault rmdir pushd
# Additionally ignore VCS directories.
complete -A directory -o bashdefault -X '*@(.git|.svn|CVS)' cd
# unset complete on variable names
complete -A variable unset
# set completes on shell options
complete -A setopt set
# shopt completes with shopt options
complete -A shopt shopt
# unalias completes with aliases
complete -A alias unalias
# command, type and which complete on commands
complete -A command type which command
# builtin completes on builtins
complete -A builtin builtin
